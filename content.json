{"meta":{"title":"IT知识分享","subtitle":"专注于大数据领域程序异常解决","description":"","author":"GilesLv","url":"http://yoursite.com"},"pages":[],"posts":[{"title":"cloudera-manager集群环境下hadooplzo压缩配置","slug":"cloudera-manager集群环境下hadooplzo压缩配置","date":"2020-03-29T07:44:12.000Z","updated":"2020-03-29T08:15:38.496Z","comments":true,"path":"2020/03/29/cloudera-manager集群环境下hadooplzo压缩配置/","link":"","permalink":"http://yoursite.com/2020/03/29/cloudera-manager%E9%9B%86%E7%BE%A4%E7%8E%AF%E5%A2%83%E4%B8%8Bhadooplzo%E5%8E%8B%E7%BC%A9%E9%85%8D%E7%BD%AE/","excerpt":"","text":"hadoop使用lzo压缩的优点 可以减小数据的大小和数据的磁盘读写时间由于压缩的数据通常只有原始数据的1/4，在HDFS中存储压缩数据，可以使集群能保存更多的数据，延长集群的使用寿命 即能够被分块，并行的处理，速度也非常的快lzo的压缩文件是由许多的小的blocks组成（约256K），使得hadoop的job可以根据block的划分来splitjob，能够并行处理并且速度非常的快。 下载地址http://archive.cloudera.com/gplextras5/parcels/ 国内访问不稳定，碰到打不开的情况多刷新几次试试 版本选择 CDH集群 GPL Extras 版本 5.x.y/ GPL Extras 5.x.y/ 例如：我的CDH集群版本是： CDH-5.16.2-1.cdh5.16.2.p0.8-el7.parcel 对应选择的GPL Extras 版本 GPLEXTRAS-5.16.2-1.cdh5.16.2.p0.8-el7.parcel，其中el6、el7是操作系统的版本，需要根据自己的系统进行选择 准备安装文件12345GPLEXTRAS-5.16.2-1.cdh5.16.2.p0.8-el7.parcelCDH-5.16.2-1.cdh5.16.2.p0.8-el7.parcel.sha1 （使用的时候重命名成.sha）manifest.json 上传文件至cm共享目录因为使用的是parcels安装，首先将下载好的文件放到cloudera-manager共享的目录中，此处为： 12345678910[app@zw-p-hadoop-master opt]$ cd &#x2F;opt&#x2F;cloudera&#x2F;parcel-repo&#x2F; (注：这里要根据自己实际安装路径修改)[app@zw-p-hadoop-master parcel-repo]$ lltotal 2085300-rw-r--r-- 1 root root 2132782197 Jun 18 2019 CDH-5.16.2-1.cdh5.16.2.p0.8-el7.parcel-rw-r--r-- 1 root root 41 Jun 18 2019 CDH-5.16.2-1.cdh5.16.2.p0.8-el7.parcel.sha-rw-r----- 1 root root 81526 Jan 17 16:38 CDH-5.16.2-1.cdh5.16.2.p0.8-el7.parcel.torrent-rw-rw-r-- 1 app app 2450598 Jan 17 22:02 GPLEXTRAS-5.16.2-1.cdh5.16.2.p0.8-el7.parcel-rw-rw-r-- 1 app app 41 Jan 17 22:02 GPLEXTRAS-5.16.2-1.cdh5.16.2.p0.8-el7.parcel.sha-rw-r----- 1 root root 267 Jan 17 22:09 GPLEXTRAS-5.16.2-1.cdh5.16.2.p0.8-el7.parcel.torrent-rw-rw-r-- 1 app app 12560 Jan 17 22:02 manifest.json 安装激活lzo服务进入cm管理界面，选择主机—&gt;Parcel，点击检查新Parcel，如果配置正确将会出现 GPLEXTRAS 对应版本为 5.16.2-1.cdh5.16.2.p0.8。点击分配，耐心等待几分钟后，再点击激活，出现如下图状态，表示 lzo服务安装工作已经完成。 ​ 配置hadoop支持lzo1）修改HDFS配置 在io.compression.codecs属性值中追加如下值： 12com.hadoop.compression.lzo.LzoCodeccom.hadoop.compression.lzo.LzopCodec 2）修改YARN配置将 mapreduce.application.classpath属性添加一项：/opt/cloudera/parcels/GPLEXTRAS/lib/hadoop/lib/* 3)修改MR应用程序环境修改mapreduce.admin.user.env属性追加 :/opt/cloudera/parcels/GPLEXTRAS/lib/hadoop/lib/native 重启集群使配置生效 配置hive支持lzo修改hive辅助jar目录，增加一项：/opt/cloudera/parcels/GPLEXTRAS/lib/hadoop/lib/ 重启集群使配置生效 验证是否生效sqoop脚本同步数据配置压缩如下： 123456789101112131415161718192021#!&#x2F;bin&#x2F;bash#ODS数据导入import_data() &#123;sqoop import \\--connect jdbc:mysql:&#x2F;&#x2F;10.1.2.75&#x2F;$1 \\--username test \\--password test \\--target-dir &#x2F;user&#x2F;hive&#x2F;warehouse&#x2F;ods.db&#x2F;$1&#39;.db&#39;&#x2F;$2 \\--delete-target-dir \\--compress \\--compression-codec com.hadoop.compression.lzo.LzopCodec \\--num-mappers 1 \\--fields-terminated-by &quot;\\t&quot; \\--query &quot;$3&quot;&#39; and $CONDITIONS;&#39;&#125;import_product_info()&#123; import_data &quot;product&quot; &quot;product_info&quot; &quot;SELECT id, product_code, product_name, version, status, asset_code, product_type, amount_type, amount_expiry, amount_range_upper,amount_range_lower, payment_method, guarantee_method, agreement_code, interest, grace_period, create_by, create_at, update_by, update_at, auto_lending, product_statistics, account_type,product_relation, remark, fund_remark, equity_product, extra_type FROM product_info where 1&#x3D;1&quot; &#125; 同步的hdfs文件以.lzo结尾，说明我们配置的lzo压缩已经生效了 参考：【1】https://blog.csdn.net/xiaolang85/article/details/8649756【2】https://blog.csdn.net/mcj1314bb/article/details/79043293","categories":[{"name":"大数据","slug":"大数据","permalink":"http://yoursite.com/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/"}],"tags":[{"name":"hadoop","slug":"hadoop","permalink":"http://yoursite.com/tags/hadoop/"},{"name":"lzo","slug":"lzo","permalink":"http://yoursite.com/tags/lzo/"},{"name":"cdh","slug":"cdh","permalink":"http://yoursite.com/tags/cdh/"}],"keywords":[{"name":"大数据","slug":"大数据","permalink":"http://yoursite.com/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/"}]},{"title":"Maven未指定setting配置文件打包失败解决办法","slug":"Maven未指定setting配置文件打包失败解决办法","date":"2020-03-28T14:51:55.000Z","updated":"2020-03-29T08:15:10.811Z","comments":true,"path":"2020/03/28/Maven未指定setting配置文件打包失败解决办法/","link":"","permalink":"http://yoursite.com/2020/03/28/Maven%E6%9C%AA%E6%8C%87%E5%AE%9Asetting%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%89%93%E5%8C%85%E5%A4%B1%E8%B4%A5%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/","excerpt":"","text":"问题描述今天在给一个Maven项目打包的时候遇到了一个奇怪的问题，在Eclipse编译器中能够正常打包，切换到windows系统的cmd控制台使用maven命令一直打包失败，报错信息如下： 1234567891011121314151617181920212223242526272829D:\\zw_workspace\\hivefunction&gt;mvn install[INFO] Scanning for projects...[INFO][INFO] ------------------------------------------------------------------------[INFO] Building hivefunction 0.0.1-SNAPSHOT[INFO] ------------------------------------------------------------------------[WARNING] The POM for com.imassbank.inf:common-tool:jar:2.0.1 is missing, no dependency information available[INFO] ------------------------------------------------------------------------[INFO] BUILD FAILURE[INFO] ------------------------------------------------------------------------[INFO] Total time: 1.239 s[INFO] Finished at: 2020-03-05T14:59:33+08:00[INFO] Final Memory: 12M/150M[INFO] ------------------------------------------------------------------------[ERROR] Failed to execute goal on project hivefunction: Could not resolve dependencies for project com.imassbank:hivefunction:jar:0.0.1-SNAPSHOT: Failure to find com.imassbank.inf:common-tool:jar:2.0.1 in https://repo.maven.apache.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced -&gt; [Help 1][ERROR][ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.[ERROR] Re-run Maven using the -X switch to enable full debug logging.[ERROR][ERROR] For more information about the errors and possible solutions, please read the following articles:[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException 解决方法仔细分析报错信息发现一直无法解析依赖的common-tool:jar，这个包是公司内部项目打到maven私服上的包。Eclipse编译器中我有配置个maven的setting文件指向公司私服，命令行方式执行因为没有指定配置文件，所以会去公网的maven私服请求，肯定拉不下来这个依赖。命令行下添加–settings参数问题得到解决。 12D:\\zw_workspace\\hivefunction&gt;mvn clean package -U --settings D:\\setting\\settings_zw_trade.xml -Dmaven.test.skip=true","categories":[{"name":"异常解决","slug":"异常解决","permalink":"http://yoursite.com/categories/%E5%BC%82%E5%B8%B8%E8%A7%A3%E5%86%B3/"}],"tags":[{"name":"maven","slug":"maven","permalink":"http://yoursite.com/tags/maven/"}],"keywords":[{"name":"异常解决","slug":"异常解决","permalink":"http://yoursite.com/categories/%E5%BC%82%E5%B8%B8%E8%A7%A3%E5%86%B3/"}]}]}